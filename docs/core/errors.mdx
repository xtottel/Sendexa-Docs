---
title: Error Handling
description: Comprehensive guide to error handling, status codes, and troubleshooting for the Sendexa API.
date: 2025-03-12
---

# Error Handling

Sendexa APIs use a consistent error format to help developers understand exactly what went wrong in any request. All errors follow a predictable JSON structure with an HTTP status code, making debugging straightforward and efficient.

---

## Error Response Format

Every error response includes the following fields:

```json
{
  "status": "error",
  "code": "INVALID_PARAMETERS",
  "message": "The phone number provided is invalid.",
  "details": {
    "field": "to",
    "value": "233500000000",
    "reason": "Phone number must start with + and country code"
  },
  "timestamp": "2025-03-12T14:55:21Z",
  "request_id": "req_a8f92bc3f2c44755"
}
```

### Response Fields

| Field | Type | Description |
|-------|------|-------------|
| `status` | string | Always `error` for error responses |
| `code` | string | Machine-readable error code (see below) |
| `message` | string | Human-readable error description |
| `details` | object | Additional context about the error (optional) |
| `timestamp` | string | ISO 8601 timestamp when error occurred |
| `request_id` | string | Unique identifier for troubleshooting |

---

## HTTP Status Codes

Sendexa uses standard HTTP status codes to indicate the type of error:

### 4xx Client Errors

| Status Code | Meaning | Description |
|-------------|---------|-------------|
| **400** | Bad Request | The request was malformed or missing required parameters |
| **401** | Unauthorized | Authentication failed - invalid or missing API token |
| **403** | Forbidden | Valid authentication but insufficient permissions |
| **404** | Not Found | The requested resource does not exist |
| **422** | Unprocessable Entity | Request is valid but contains semantic errors |
| **429** | Too Many Requests | Rate limit exceeded - slow down your requests |

### 5xx Server Errors

| Status Code | Meaning | Description |
|-------------|---------|-------------|
| **500** | Internal Server Error | Unexpected error on Sendexa servers |
| **502** | Bad Gateway | Upstream provider error |
| **503** | Service Unavailable | Temporary service disruption |
| **504** | Gateway Timeout | Request took too long to process |

---

## Common Error Codes

### Authentication Errors

#### INVALID_TOKEN
```json
{
  "status": "error",
  "code": "INVALID_TOKEN",
  "message": "The API token provided is invalid or has expired.",
  "details": {
    "reason": "Token signature verification failed"
  },
  "timestamp": "2025-03-12T14:55:21Z"
}
```

**Causes:**
- Token is missing from request headers
- Token has expired
- Token is malformed or corrupted
- Token was revoked

**Solution:** Generate a new API token from your dashboard.

#### UNAUTHORIZED_ACCESS
```json
{
  "status": "error",
  "code": "UNAUTHORIZED_ACCESS",
  "message": "You do not have permission to access this resource.",
  "timestamp": "2025-03-12T14:55:21Z"
}
```

**Causes:**
- Token doesn't have required permissions
- Account is suspended
- Feature not available in your plan

**Solution:** Upgrade your plan or contact support.

---

### Validation Errors

#### INVALID_PARAMETERS
```json
{
  "status": "error",
  "code": "INVALID_PARAMETERS",
  "message": "One or more required fields are missing or incorrect.",
  "details": {
    "errors": [
      {
        "field": "to",
        "value": "0500000000",
        "reason": "Phone number must include country code (e.g., +233)"
      },
      {
        "field": "message",
        "reason": "Message field is required"
      }
    ]
  },
  "timestamp": "2025-03-12T14:55:21Z"
}
```

**Common Validation Issues:**
- Missing required fields (`to`, `message`, `sender_id`)
- Invalid phone number format
- Message too long (>1600 characters)
- Invalid sender ID (>11 characters or contains special chars)

#### INVALID_PHONE_NUMBER
```json
{
  "status": "error",
  "code": "INVALID_PHONE_NUMBER",
  "message": "The phone number provided is invalid.",
  "details": {
    "field": "to",
    "value": "+233500000",
    "reason": "Phone number is too short"
  },
  "timestamp": "2025-03-12T14:55:21Z"
}
```

**Valid Phone Number Format:**
- Must start with `+` and country code
- Example: `+233500000000` (Ghana)
- No spaces or special characters
- Length: 10-15 digits after country code

---

### Business Logic Errors

#### INSUFFICIENT_BALANCE
```json
{
  "status": "error",
  "code": "INSUFFICIENT_BALANCE",
  "message": "You do not have enough SMS credits to complete this request.",
  "details": {
    "current_balance": 5.50,
    "required_balance": 10.00,
    "currency": "GHS",
    "deficit": 4.50
  },
  "timestamp": "2025-03-12T10:15:00Z"
}
```

**Solution:** Top up your account via dashboard or API.

#### SENDER_ID_NOT_REGISTERED
```json
{
  "status": "error",
  "code": "SENDER_ID_NOT_REGISTERED",
  "message": "The sender ID you provided is not registered to your account.",
  "details": {
    "sender_id": "MyBrand",
    "registered_ids": ["Sendexa", "TestID"]
  },
  "timestamp": "2025-03-12T14:55:21Z"
}
```

**Solution:** Register your sender ID in **Settings â†’ Sender IDs** before using it.

#### MESSAGE_TOO_LONG
```json
{
  "status": "error",
  "code": "MESSAGE_TOO_LONG",
  "message": "Message exceeds maximum allowed length.",
  "details": {
    "current_length": 1800,
    "max_length": 1600,
    "excess_characters": 200
  },
  "timestamp": "2025-03-12T14:55:21Z"
}
```

**Solution:** Shorten your message or split into multiple SMS.

---

### Rate Limiting Errors

#### RATE_LIMIT_EXCEEDED
```json
{
  "status": "error",
  "code": "RATE_LIMIT_EXCEEDED",
  "message": "Too many requests. Please slow down your request rate.",
  "details": {
    "limit": 60,
    "window": "1 minute",
    "retry_after": 30
  },
  "timestamp": "2025-03-12T14:55:21Z"
}
```

**Response Headers:**
```http
X-RateLimit-Limit: 60
X-RateLimit-Remaining: 0
X-RateLimit-Reset: 1678627800
Retry-After: 30
```

**Solution:** Implement exponential backoff and respect the `Retry-After` header.

---

### Server Errors

#### SERVER_ERROR
```json
{
  "status": "error",
  "code": "SERVER_ERROR",
  "message": "An unexpected error occurred on our servers. Please try again.",
  "details": {
    "request_id": "req_a8f92bc3f2c44755"
  },
  "timestamp": "2025-03-12T14:55:21Z"
}
```

**Solution:** Retry the request. If issue persists, contact support with the `request_id`.

#### PROVIDER_ERROR
```json
{
  "status": "error",
  "code": "PROVIDER_ERROR",
  "message": "SMS provider is temporarily unavailable. Auto-routing to backup provider.",
  "details": {
    "primary_provider": "Kairos",
    "backup_provider": "Hubtel",
    "retry_count": 1
  },
  "timestamp": "2025-03-12T14:55:21Z"
}
```

**Solution:** Sendexa automatically routes to backup providers. No action needed.

---

## Error Code Reference

Complete list of error codes:

| Error Code | HTTP Status | Category | Description |
|------------|-------------|----------|-------------|
| `INVALID_TOKEN` | 401 | Authentication | Token is invalid or expired |
| `UNAUTHORIZED_ACCESS` | 403 | Authorization | Insufficient permissions |
| `INVALID_PARAMETERS` | 400 | Validation | Missing or invalid parameters |
| `INVALID_PHONE_NUMBER` | 400 | Validation | Phone number format is invalid |
| `INVALID_SENDER_ID` | 400 | Validation | Sender ID is invalid |
| `MESSAGE_TOO_LONG` | 400 | Validation | Message exceeds max length |
| `INSUFFICIENT_BALANCE` | 402 | Business Logic | Not enough credits |
| `SENDER_ID_NOT_REGISTERED` | 403 | Business Logic | Sender ID not authorized |
| `DUPLICATE_REQUEST` | 409 | Business Logic | Request already processed |
| `RATE_LIMIT_EXCEEDED` | 429 | Rate Limiting | Too many requests |
| `RESOURCE_NOT_FOUND` | 404 | Resource | Requested resource doesn't exist |
| `SERVER_ERROR` | 500 | Server | Internal server error |
| `PROVIDER_ERROR` | 502 | Server | Upstream provider error |
| `SERVICE_UNAVAILABLE` | 503 | Server | Service temporarily unavailable |
| `GATEWAY_TIMEOUT` | 504 | Server | Request timeout |

---

## Handling Errors in Your Code

### JavaScript Example

```js
import axios from 'axios';

async function sendSMS(to, message) {
  try {
    const response = await axios.post(
      'https://api.sendexa.co/v1/sms/send',
      { to, message, sender_id: 'Sendexa' },
      {
        headers: {
          Authorization: `Bearer YOUR_TOKEN_HERE`,
          'Content-Type': 'application/json',
        },
      }
    );
    
    return response.data;
  } catch (error) {
    if (error.response) {
      // The request was made and the server responded with an error
      const { status, data } = error.response;
      
      switch (data.code) {
        case 'INSUFFICIENT_BALANCE':
          console.error('Not enough balance. Please top up.');
          // Redirect to billing page
          break;
          
        case 'INVALID_PHONE_NUMBER':
          console.error('Invalid phone number:', data.details);
          // Show validation error to user
          break;
          
        case 'RATE_LIMIT_EXCEEDED':
          console.error('Rate limit hit. Retrying in', data.details.retry_after, 'seconds');
          // Implement retry with backoff
          await new Promise(resolve => setTimeout(resolve, data.details.retry_after * 1000));
          return sendSMS(to, message); // Retry
          
        case 'SERVER_ERROR':
          console.error('Server error. Request ID:', data.request_id);
          // Log for support ticket
          break;
          
        default:
          console.error('Error:', data.message);
      }
    } else if (error.request) {
      // The request was made but no response was received
      console.error('No response from server. Check your connection.');
    } else {
      // Something happened in setting up the request
      console.error('Error setting up request:', error.message);
    }
    
    throw error;
  }
}
```

### Python Example

```python
import requests
import time

def send_sms(to, message, max_retries=3):
    url = "https://api.sendexa.co/v1/sms/send"
    headers = {
        "Authorization": "Bearer YOUR_TOKEN_HERE",
        "Content-Type": "application/json"
    }
    data = {
        "to": to,
        "message": message,
        "sender_id": "Sendexa"
    }
    
    for attempt in range(max_retries):
        try:
            response = requests.post(url, headers=headers, json=data)
            response.raise_for_status()
            return response.json()
            
        except requests.exceptions.HTTPError as e:
            error_data = e.response.json()
            error_code = error_data.get('code')
            
            if error_code == 'RATE_LIMIT_EXCEEDED':
                retry_after = error_data.get('details', {}).get('retry_after', 60)
                print(f"Rate limit exceeded. Waiting {retry_after} seconds...")
                time.sleep(retry_after)
                continue
                
            elif error_code == 'INSUFFICIENT_BALANCE':
                print("Insufficient balance. Please top up your account.")
                raise
                
            elif error_code == 'SERVER_ERROR':
                if attempt < max_retries - 1:
                    wait_time = 2 ** attempt  # Exponential backoff
                    print(f"Server error. Retrying in {wait_time} seconds...")
                    time.sleep(wait_time)
                    continue
                    
            print(f"Error: {error_data.get('message')}")
            raise
            
        except requests.exceptions.RequestException as e:
            print(f"Request failed: {str(e)}")
            raise
```

---

## Best Practices

### 1. Always Check Status Code
Don't assume success. Always verify the HTTP status code and response body.

### 2. Log Request IDs
Store `request_id` from error responses for support inquiries.

### 3. Implement Retry Logic
For `5xx` errors and rate limits, implement exponential backoff:

```js
async function retryWithBackoff(fn, maxRetries = 3) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await fn();
    } catch (error) {
      if (i === maxRetries - 1) throw error;
      
      const isRetryable = error.response?.status >= 500 || 
                         error.response?.data?.code === 'RATE_LIMIT_EXCEEDED';
      
      if (!isRetryable) throw error;
      
      const delay = Math.min(1000 * (2 ** i), 10000); // Max 10 seconds
      await new Promise(resolve => setTimeout(resolve, delay));
    }
  }
}
```

### 4. Validate Before Sending
Validate phone numbers and parameters on your end before making API calls.

### 5. Monitor Error Rates
Track error rates in your application to identify patterns and issues early.

### 6. Handle Rate Limits Gracefully
Implement queuing and respect `Retry-After` headers.

---

## Testing Error Scenarios

Use these test credentials to trigger specific errors:

```js
// Trigger INSUFFICIENT_BALANCE error
{
  "to": "+233500000000",
  "message": "Test",
  "sender_id": "TEST_INSUFFICIENT_BALANCE"
}

// Trigger INVALID_PHONE_NUMBER error
{
  "to": "invalid_number",
  "message": "Test",
  "sender_id": "Sendexa"
}

// Trigger RATE_LIMIT_EXCEEDED error
// Send 100 requests within 1 minute
```

---

## Need Help?

If you encounter persistent errors:

1. **Check Status Page:** [status.sendexa.co](https://status.sendexa.co)
2. **Review Docs:** [docs.sendexa.co](https://docs.sendexa.co)
3. **Contact Support:**
   - Email: **support@sendexa.co**
   - Include `request_id` from error response
   - Describe steps to reproduce
4. **Join Community:** [community.sendexa.co](https://community.sendexa.co)